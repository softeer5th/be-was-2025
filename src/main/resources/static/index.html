<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./reset.css" rel="stylesheet" />
    <link href="./global.css" rel="stylesheet" />
    <link href="./main.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <header class="header">
        <a href="/"><img src="./img/signiture.svg" /></a>
        <ul class="header__menu">
          <!-- MENU -->
        </ul>
      </header>
      <div class="wrapper">
        <div class="post">
          <div class="post__account">
            <img class="post__account__img" />
            <p class="post__account__nickname"><!-- ARTICLE_USERNAME --></p>
          </div>
          <img class="post__img" />
          <div class="post__menu">
            <ul class="post__menu__personal">
              <li>
                <button class="post__menu__btn">
                  <img src="./img/like.svg" />
                </button>
              </li>
              <li>
                <button class="post__menu__btn">
                  <img src="./img/sendLink.svg" />
                </button>
              </li>
            </ul>
            <button class="post__menu__btn">
              <img src="./img/bookMark.svg" />
            </button>
          </div>
          <p class="post__article">
            <!-- ARTICLE_CONTENT -->
          </p>
        </div>
<!--        <ul class="comment">-->
<!--          <li class="comment__item">-->
<!--            <div class="comment__item__user">-->
<!--              <img class="comment__item__user__img" />-->
<!--              <p class="comment__item__user__nickname">account</p>-->
<!--            </div>-->
<!--            <p class="comment__item__article">-->
<!--              군인 또는 군무원이 아닌 국민은 대한민국의 영역안에서는 중대한-->
<!--              군사상 기밀·초병·초소·유독음식물공급·포로·군용물에 관한 죄중-->
<!--              법률이 정한 경우와 비상계엄이 선포된 경우를 제외하고는 군사법원의-->
<!--              재판을 받지 아니한다.-->
<!--            </p>-->
<!--          </li>-->
<!--          <li class="comment__item">-->
<!--            <div class="comment__item__user">-->
<!--              <img class="comment__item__user__img" />-->
<!--              <p class="comment__item__user__nickname">account</p>-->
<!--            </div>-->
<!--            <p class="comment__item__article">-->
<!--              대통령의 임기연장 또는 중임변경을 위한 헌법개정은 그 헌법개정 제안-->
<!--              당시의 대통령에 대하여는 효력이 없다. 민주평화통일자문회의의-->
<!--              조직·직무범위 기타 필요한 사항은 법률로 정한다.-->
<!--            </p>-->
<!--          </li>-->
<!--          <li class="comment__item">-->
<!--            <div class="comment__item__user">-->
<!--              <img class="comment__item__user__img" />-->
<!--              <p class="comment__item__user__nickname">account</p>-->
<!--            </div>-->
<!--            <p class="comment__item__article">-->
<!--              민주평화통일자문회의의 조직·직무범위 기타 필요한 사항은 법률로-->
<!--              정한다.-->
<!--            </p>-->
<!--          </li>-->
<!--          <li class="comment__item hidden">-->
<!--            <div class="comment__item__user">-->
<!--              <img class="comment__item__user__img" />-->
<!--              <p class="comment__item__user__nickname">account</p>-->
<!--            </div>-->
<!--            <p class="comment__item__article">Comment 1</p>-->
<!--          </li>-->
<!--          <li class="comment__item hidden">-->
<!--            <div class="comment__item__user">-->
<!--              <img class="comment__item__user__img" />-->
<!--              <p class="comment__item__user__nickname">account</p>-->
<!--            </div>-->
<!--            <p class="comment__item__article">Comment 2</p>-->
<!--          </li>-->
<!--          <li class="comment__item hidden">-->
<!--            <div class="comment__item__user">-->
<!--              <img class="comment__item__user__img" />-->
<!--              <p class="comment__item__user__nickname">account</p>-->
<!--            </div>-->
<!--            <p class="comment__item__article">Comment 3</p>-->
<!--          </li>-->
<!--          <button id="show-all-btn" class="btn btn_ghost btn_size_m">-->
<!--            모든 댓글 보기(3개)-->
<!--          </button>-->
<!--        </ul>-->
        <nav class="nav">
          <ul class="nav__menu">
            <li class="nav__menu__item">
              <a id="prev-article-link" class="nav__menu__item__btn" href="">
                <img
                  class="nav__menu__item__img"
                  src="./img/ci_chevron-left.svg"
                />
                이전 글
              </a>
            </li>
            <li class="nav__menu__item">
              <a class="btn btn_ghost btn_size_m">댓글 작성</a>
            </li>
            <li class="nav__menu__item">
              <a class="btn btn_primary btn_size_m" href="/write">글쓰기</a>
            </li>
            <li class="nav__menu__item">
              <a id="next-article-link" class="nav__menu__item__btn" href="">
                다음 글
                <img
                  class="nav__menu__item__img"
                  src="./img/ci_chevron-right.svg"
                />
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </body>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const page = parseInt(urlParams.get("page") || '0', 10);
    console.log(page);

    const prevArticleLink = document.querySelector("#prev-article-link");
    const nextArticleLink = document.querySelector("#next-article-link");

    prevArticleLink.addEventListener('click', function(event){
      event.preventDefault();

      if(page === 0){
        alert("최신 글입니다.");
      }else{
        const beforePage = page - 1;
        window.location.href = `http://localhost:8080?page=${beforePage}`;
      }
    });

    nextArticleLink.addEventListener('click', function(event){
      event.preventDefault();

      const nextPage = page + 1;
      const url = `http://localhost:8080/next-article?page=${nextPage}`;

      fetch(url, {
        method: 'GET',
      }).then(response => {
        if(response.redirected){
          window.location.href = response.url;
        }else{
          alert("마지막 글입니다.");
        }
      });
    })

  </script>
</html>
