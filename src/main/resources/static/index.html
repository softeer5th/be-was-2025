<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="./reset.css" rel="stylesheet" />
  <link href="./global.css" rel="stylesheet" />
  <link href="./main.css" rel="stylesheet" />
  <title>메인 페이지</title>
  <style>
    #login-buttons {
      display: flex;
      flex-direction: row;
      gap: 10px;
    }
    #login-buttons .header__menu__item {
      margin: 0;
    }
  </style>
  <script>
    window.onload = async function () {
      try {
        const response = await fetch('/user/login/status', { method: 'GET', credentials: 'include' });
        const userId = response.ok ? await response.text() : null;

        if (userId) {
          document.getElementById('user-info').innerHTML = `
              <span>안녕하세요, ${userId}님</span>
            `;
          document.getElementById('login-buttons').style.display = 'none';
        } else {
          document.getElementById('user-info').innerHTML = '';
          document.getElementById('login-buttons').style.display = 'flex';
        }

        document.getElementById('main-content').style.display = 'block';
      } catch (error) {
        console.error('사용자 정보를 가져오지 못했습니다.', error);
      }
    };
  </script>
</head>
<body>
<div class="container">
  <header class="header">
    <a href="/"><img src="./img/signiture.svg" alt="Signiture" /></a>
    <ul class="header__menu">
      <li id="user-info" class="header__menu__item"></li>
      <div id="login-buttons" class="header__menu">
        <li class="header__menu__item">
          <a class="btn btn_contained btn_size_s" href="/login">로그인</a>
        </li>
        <li class="header__menu__item">
          <a class="btn btn_ghost btn_size_s" href="/registration">회원 가입</a>
        </li>
      </div>
    </ul>
  </header>
  <div id="main-content" class="wrapper" style="display: none;">
    <div class="post">
      <div class="post__account">
        <img class="post__account__img" />
        <p class="post__account__nickname">account</p>
      </div>
      <img class="post__img" />
      <div class="post__menu">
        <ul class="post__menu__personal">
          <li>
            <button class="post__menu__btn">
              <img src="./img/like.svg" />
            </button>
          </li>
          <li>
            <button class="post__menu__btn">
              <img src="./img/sendLink.svg" />
            </button>
          </li>
        </ul>
        <button class="post__menu__btn">
          <img src="./img/bookMark.svg" />
        </button>
      </div>
      <p class="post__article">
        여기에 게시글 내용이 표시됩니다.
      </p>
    </div>
  </div>
</div>
</body>
</html>